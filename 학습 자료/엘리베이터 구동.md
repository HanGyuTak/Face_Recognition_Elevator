# 엘리베이터 구동  
------
## 1. 엘리베이터 모형에 따라 제작    
구매한 엘리베이터 모형에 따라 기본적인 엘리베이터 틀을 제작하였다. 

![image](https://user-images.githubusercontent.com/94752167/183826255-830369be-48b3-4fa9-a315-3be9288c9cc6.png)
![image](https://user-images.githubusercontent.com/94752167/183826273-c2cadc43-bce3-4e59-affb-116528c7ec8d.png)


## 2. 엘리베이터 구동 시험
제작한 엘리베이터가 정상적으로 구동하는지 시험해 보기 위해 아래와 같은 코드를 작성하여 시험해 보았다.    


```
int in1 = 9;
int in2 = 6;
int in3 = 10;
int in4 = 11;
int enA = 5;
int enB = 3;
int check = 0;

void setup() {
  Serial.begin(9600);
  pinMode(in1, OUTPUT);
  pinMode(in2, OUTPUT);
  pinMode(in3, OUTPUT);
  pinMode(in4, OUTPUT);
  pinMode(enA, OUTPUT);
  pinMode(enB, OUTPUT);
  

}

void loop() {//엘리베이터가 위로 작동
  digitalWrite(in1, LOW);
  digitalWrite(in2, HIGH);
  digitalWrite(in3, LOW);
  digitalWrite(in4, HIGH);
  digitalWrite(enA, 10);
  digitalWrite(enB, 10);
}

```

https://user-images.githubusercontent.com/94752167/183826615-4d5c6174-6d4a-4edb-b0d0-23fa7b28832d.mp4



엘리베이터가 위로 작동하도록 코딩하였다. loop의 LOW와 HIGH를 바꾸면 아래로 작동한다.    

## 3. 엘리베이터가 층별로 멈추도록 구동

```
int in1 = 3;
int in2 = 4;
int enA = 2;
/*여기서부터 입력...인자 */
int now_floor = 1; /*현재 층수는 1층이라고 가정.*/
int going_floor = 0; /*처음에는 입력이 없다고 가정*/

void setup() {
  Serial.begin(9600);
  pinMode(in1, OUTPUT);
  pinMode(in2, OUTPUT);
  pinMode(enA, OUTPUT);
  

}

void loop() {
  /*가고 싶은 층수 입력받았다고 가정
   going_floor = Serial.read();
  */
  
  digitalWrite(enA, 10);
  
  if(going_floor == 0)/*아직 입력이 없었을 때, 모터를 중지한다.*/
  {
    digitalWrite(in1, LOW);
    digitalWrite(in2, LOW);
  }
  else if(going_floor != 0) /*가고 싶은 층수를 입력 받았을 때*/
  {
    if(going_floor - now_floor > 0)/*가고 싶은 층수가 본인의 기준 위로 올라갈 때*/
    {
      if(going_floor - now_floor == 1)/*가고 싶은 층수가 한 층 위에 있을 때*/
      {
        digitalWrite(in1, HIGH);/*위로 이동 후 약 1초 뒤 정지.*/
        digitalWrite(in2, LOW);
        delay(960);
        digitalWrite(in1, LOW);
        digitalWrite(in2, LOW);
      }
      else if(going_floor - now_floor == 2)/*가고 싶은 층수가 두 층 위에 있을 때*/
      { 
        digitalWrite(in1, HIGH);/*위로 이동 후 약 2초 뒤 정지.*/
        digitalWrite(in2, LOW);
        delay(1920);
        digitalWrite(in1, LOW);
        digitalWrite(in2, LOW);
      }
      /*현재 층수값을 변경한 후, 가고싶은 층수 초기화*/
      now_floor = going_floor;
      going_floor = 0;
    }
    else if(going_floor - now_floor < 0)/*가고 싶은 층수가 본인의 기준 아래로 내려갈 때*/
    {
      if(going_floor - now_floor == -1)/*가고 싶은 층수가 한 층 아래에 있을 때*/
      {
        digitalWrite(in1, LOW);/*아래로 이동 후 약 1초 뒤 정지.*/
        digitalWrite(in2, HIGH);
        delay(960);
        digitalWrite(in1, LOW);
        digitalWrite(in2, LOW);
      }
      else if(going_floor - now_floor == -2)/*가고 싶은 층수가 두 층 아래에 있을 때*/
      {
        digitalWrite(in1, LOW);/*아래로 이동 후 약 2초 뒤 정지.*/
        digitalWrite(in2, HIGH);
        delay(1920);
        digitalWrite(in1, LOW);
        digitalWrite(in2, LOW);
      }
      /*현재 층수값을 변경한 후, 가고싶은 층수 초기화*/
      now_floor = going_floor;
      going_floor = 0;
    }
  }
}
```

